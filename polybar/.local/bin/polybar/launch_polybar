#!/bin/sh
# -----------------------------------------------------------------------------
# Launch Polybar
#
# (Re)starts polybar. If there is a hostname override in place, runs that.
# Otherwise launches default config.
# -----------------------------------------------------------------------------

killall -q polybar
while pgrep -u "$(id -u)" -x polybar > /dev/null; do sleep 1; done

POLYBAR_OVERRIDE="$XDG_CONFIG_HOME/dotfiles/$(hostname)/polybar_layout.sh"
if [ -f "$POLYBAR_OVERRIDE" ]; then
  $POLYBAR_OVERRIDE
else
  polybar --reload simple &
fi
